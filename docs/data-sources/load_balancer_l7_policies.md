---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "kakaocloud_load_balancer_l7_policies Data Source - kakaocloud"
subcategory: "Load Balancer"
description: |-
  The kakaocloud_load_balancer_l7_policies data source allows you to retrieve information about Layer 7 (L7) policies configured for a specific Load Balancer listener in KakaoCloud.
  This data source is useful when you need to:
  List all L7 policies associated with a given load balancer and listener.Filter policies by attributes such as position, action, operating status, or provisioning status.Review detailed policy settings including redirects, priority, and associated L7 rules.Dynamically reference policy attributes (e.g., IDs, names, rules) in your Terraform configurations without hardcoding values.
  Available filters
  | Parameter             | Type                         | Description |
  |---------------------|------------------------------|-------------|
  | position            | integer                      | Policy priority. Smaller numbers indicate higher priority. <br>Possible values: > 0 |
  | action              | L7PolicyAction               | Policy action type <br>Possible values: <br>- `REDIRECT_PREFIX`: Redirect by prefix <br>- `REDIRECT_TO_POOL`: Redirect to target pool <br>- `REDIRECT_TO_URL`: Redirect to URL |
  | provisioning_status | ProvisioningStatus           | Provisioning status <br>Possible values: <br>- `ACTIVE`: Active <br>- `DELETED`: Deleted <br>- `ERROR`: Error <br>- `PENDING_CREATE`: Pending creation <br>- `PENDING_UPDATE`: Pending update <br>- `PENDING_DELETE`: Pending deletion |
  | operating_status    | LoadBalancerOperatingStatus  | Operating status <br>Possible values: <br>- `ONLINE`: Online <br>- `DRAINING`: Draining connections <br>- `OFFLINE`: Offline <br>- `DEGRADED`: Degraded <br>- `ERROR`: Error <br>- `NO_MONITOR`: No monitoring |
  | name                | string                       | L7 policy name |
  | sort_keys           | string                       | Fields to sort by (comma-separated) <br>Default value: `created_at` |
  | sort_dirs           | string                       | Sort direction <br>Possible values: `asc`, `desc` <br>Default value: `desc` |
  | limit               | integer                      | Maximum number of items to return per page <br>Range: 1–1000 <br>Default value: `20` |
  | offset              | integer                      | Starting offset for the query <br>Range: ≥ 0 <br>Default value: `0` |
---

# kakaocloud_load_balancer_l7_policies (Data Source)

The `kakaocloud_load_balancer_l7_policies` data source allows you to retrieve information about Layer 7 (L7) policies
configured for a specific Load Balancer listener in KakaoCloud.

This data source is useful when you need to:

- List all L7 policies associated with a given load balancer and listener.
- Filter policies by attributes such as position, action, operating status, or provisioning status.
- Review detailed policy settings including redirects, priority, and associated L7 rules.
- Dynamically reference policy attributes (e.g., IDs, names, rules) in your Terraform configurations without hardcoding
  values.

## Available filters

| Parameter           | Type                        | Description                                                                                                                                                                                                                            |
|---------------------|-----------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| position            | integer                     | Policy priority. Smaller numbers indicate higher priority. <br>Possible values: > 0                                                                                                                                                    |
| action              | L7PolicyAction              | Policy action type <br>Possible values: <br>- `REDIRECT_PREFIX`: Redirect by prefix <br>- `REDIRECT_TO_POOL`: Redirect to target pool <br>- `REDIRECT_TO_URL`: Redirect to URL                                                         |
| provisioning_status | ProvisioningStatus          | Provisioning status <br>Possible values: <br>- `ACTIVE`: Active <br>- `DELETED`: Deleted <br>- `ERROR`: Error <br>- `PENDING_CREATE`: Pending creation <br>- `PENDING_UPDATE`: Pending update <br>- `PENDING_DELETE`: Pending deletion |
| operating_status    | LoadBalancerOperatingStatus | Operating status <br>Possible values: <br>- `ONLINE`: Online <br>- `DRAINING`: Draining connections <br>- `OFFLINE`: Offline <br>- `DEGRADED`: Degraded <br>- `ERROR`: Error <br>- `NO_MONITOR`: No monitoring                         |
| name                | string                      | L7 policy name                                                                                                                                                                                                                         |
| sort_keys           | string                      | Fields to sort by (comma-separated) <br>Default value: `created_at`                                                                                                                                                                    |
| sort_dirs           | string                      | Sort direction <br>Possible values: `asc`, `desc` <br>Default value: `desc`                                                                                                                                                            |
| limit               | integer                     | Maximum number of items to return per page <br>Range: 1–1000 <br>Default value: `20`                                                                                                                                                   |
| offset              | integer                     | Starting offset for the query <br>Range: ≥ 0 <br>Default value: `0`                                                                                                                                                                    |

## Example Usage

```terraform
# Copyright (c) HashiCorp, Inc.
# SPDX-License-Identifier: MPL-2.0

# List all L7 policies for a given load balancer and listener
data "kakaocloud_load_balancer_l7_policies" "all" {
  load_balancer_id = "<your-load-balancer-id>"
  listener_id      = "<your-listener-id>"
}

# List filtered L7 policies by attributes
data "kakaocloud_load_balancer_l7_policies" "filtered" {
  load_balancer_id = "<your-load-balancer-id>"
  listener_id      = "<your-listener-id>"

  filter = [
    {
      name  = "position"
      value = "1" # Policy priority. Smaller number = higher priority (must be > 0)
    },
    {
      name  = "action"
      value = "REDIRECT_TO_URL" # REDIRECT_PREFIX, REDIRECT_TO_POOL, REDIRECT_TO_URL
    },
    {
      name  = "provisioning_status"
      value = "ACTIVE" # ACTIVE, DELETED, ERROR, PENDING_CREATE, PENDING_UPDATE, PENDING_DELETE
    },
    {
      name  = "operating_status"
      value = "ONLINE" # ONLINE, DRAINING, OFFLINE, DEGRADED, ERROR, NO_MONITOR
    },
    {
      name  = "name"
      value = "<your-l7-policy-name>"
    }
  ]
}

# Output all L7 policies (basic info)
output "all_l7_policies" {
  description = "List of all L7 policies for the specified load balancer and listener"
  value = [
    for policy in data.kakaocloud_load_balancer_l7_policies.all.l7_policies : {
      id       = policy.id
      name     = policy.name
      position = policy.position
      action   = policy.action
      status   = policy.operating_status
    }
  ]
}

# Output filtered L7 policies (with redirect URL if applicable)
output "filtered_l7_policies" {
  description = "Filtered L7 policies matching given criteria"
  value = [
    for policy in data.kakaocloud_load_balancer_l7_policies.filtered.l7_policies : {
      id            = policy.id
      name          = policy.name
      action        = policy.action
      redirect_url  = policy.redirect_url
      redirect_code = policy.redirect_http_code
      rules_count   = length(policy.rules) # Derived attribute: number of rules
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->

## Argument Reference

- `listener_id` (Required, String) ID of the listener
- `load_balancer_id` (Required, String) ID of the load balancer

- `filter` (Optional, Attributes List) Filters to narrow down the returned results. (
  see [below for nested schema](#nestedatt--filter))
- `timeouts` (Optional, Attributes) Custom timeout settings. (See [below for nested schema](#nestedatt--timeouts).)

## Attribute Reference

The following attributes are exported:

- `l7_policies` (Attributes List) List of L7 policies associated with the specified load balancer and listener (
  see [below for nested schema](#nestedatt--l7_policies))

<a id="nestedatt--filter"></a>

### Nested Schema for `filter`

- `name` (Required, String) Name of the attribute to filter by.

- `value` (Optional, String) Value to match for the specified filter attribute.

<a id="nestedatt--timeouts"></a>

### Nested Schema for `timeouts`

- `read` (Optional, String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration)
  consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (
  minutes), "h" (hours).

<a id="nestedatt--l7_policies"></a>

### Nested Schema for `l7_policies`

- `action` (String) Policy action type
- `description` (String) Description of the policy
- `id` (String) L7 policy ID
- `name` (String) Policy name
- `operating_status` (String) Operating status
- `position` (Number) Policy priority (smaller numbers indicate higher priority)
- `project_id` (String) Project ID the policy belongs to
- `provisioning_status` (String) Provisioning status
- `redirect_http_code` (Number) HTTP status code (3xx) used for redirection
- `redirect_prefix` (String) Redirect target path prefix (`action=REDIRECT_PREFIX`)
- `redirect_target_group_id` (String) Redirect target group ID (`action=REDIRECT_TO_POOL`)
- `redirect_url` (String) Redirect target URL (http or https format, `action=REDIRECT_TO_URL`)
- `rules` (Attributes List) List of associated L7 rules (see [below for nested schema](#nestedatt--l7_policies--rules))

<a id="nestedatt--l7_policies--rules"></a>

### Nested Schema for `l7_policies.rules`

- `compare_type` (String) Rule comparison method
- `id` (String) Unique ID of the L7 rule
- `is_inverted` (Boolean) Whether the rule is inverted<br/>- If `true`, the opposite of the comparison result is
  considered a match
- `key` (String) Comparison key
- `operating_status` (String) Operating status
- `project_id` (String) Project ID
- `provisioning_status` (String) Provisioning status
- `type` (String) Target type of the rule
- `value` (String) Value to compare



